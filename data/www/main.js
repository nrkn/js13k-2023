(()=>{"use strict";const e=160,o=16;let t=0,n=e;const r=()=>{t=innerWidth>innerHeight?1:2,n=Math.floor((1===t?innerWidth:innerHeight)/(1===t?innerHeight:innerWidth)*e)},a=()=>1===t?n:e,l=()=>1===t?e:n,d=c.getContext("2d"),h=(e,o,t,n,r,a,l)=>d.drawImage(e,n,r,o,t,a,l,o,t),i=()=>{c.width=a(),c.height=l(),d.fillStyle="#000",d.fillRect(0,0,a(),l())},s=[];onkeydown=e=>{87!==e.keyCode&&38!==e.keyCode||(s[1]=1),83!==e.keyCode&&40!==e.keyCode||(s[2]=1),65!==e.keyCode&&37!==e.keyCode||(s[3]=1),68!==e.keyCode&&39!==e.keyCode||(s[4]=1),32!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode&&69!==e.keyCode||(s[5]=1)},onkeyup=e=>{87!==e.keyCode&&38!==e.keyCode||(s[1]=0),83!==e.keyCode&&40!==e.keyCode||(s[2]=0),65!==e.keyCode&&37!==e.keyCode||(s[3]=0),68!==e.keyCode&&39!==e.keyCode||(s[4]=0),32!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode&&69!==e.keyCode||(s[5]=0)};const y=e=>`${e}`.padStart(2,"0");let k=1,C=16,f=0;let g,M,m=0,u=0,w=0,p=0,A=0;const $=()=>{const e=u-p>125;g=E,M=F,s[1]&&e&&(F--,p=u,A=1),s[2]&&e&&(F++,p=u,A=1),s[3]&&e&&(E--,p=u,A=1),s[4]&&e&&(E++,p=u,A=1),I[2][F*I[0]+E][0]<=8&&(E=g,F=M,A=0),A&&(f++,f>=60&&(f=0,C++),C>=24&&(C=0,k++),b.classList.toggle("n",!(C>=6&&C<18))),A=0},H=()=>{$(),i(),(()=>{const[e,t,n,r,d,h]=((e,t,n,r)=>{let a=Math.ceil(n/o),l=Math.ceil(r/o);a=a%2?a:a+1,l=l%2?l:l+1;const d=(a-1)/2,h=(l-1)/2;return[a,l,t-h,e-d,Math.floor(n/2-8-d*o),Math.floor(r/2-8-h*o)]})(E,F,a(),l()),[c,i,s]=I;let y=d,k=h;for(let a=n;a<n+t;a++)if(!(a<0||a>=i)){for(let t=r;t<r+e;t++){if(t<0||t>=c)continue;const e=s[a*c+t][0];S(e,y,k),y+=o}y=d,k+=o}})(),(()=>{const e=`DAY ${o=k,`${o}`.padEnd(4," ")} ${y(C)}:${y(f)}`;var o;for(let o=0;o<e.length;o++){const t=e.charCodeAt(o);L(t,8*o,0)}})(),x(0+w,Math.floor(a()/2-8),Math.floor(l()/2-8))};let R=1,W=["Lost contact with","RANGER. Take boat","and investigate."];const q=e=>{(e=>{m||(m=e),u=e-m,w=Math.floor(u/500)%2})(e),0===R&&H(),1===R&&(()=>{0===W.length&&(R=0),s[5]&&(R=0),i();const e=Math.floor(l()/8),o=Math.floor(a()/8);let t=8*Math.floor((e-W.length)/2);for(let e=0;e<W.length;e++){const n=W[e];for(let e=0;e<n.length;e++){const r=n.charCodeAt(e),a=8*Math.floor((o-n.length)/2)+8*e;L(r,a,t)}t+=8}})(),requestAnimationFrame(q)};let v,E=0,F=0,I=((e,o)=>{const t=[];for(let e=0;e<160;e++)for(let e=0;e<160;e++){const e=Math.random()<.75,o=e?13:2,n=e?8:4,r=Math.floor(Math.random()*n)+o;t.push([r])}return[160,160,t]})();const L=(e,o,t)=>h(v,8,8,8*(e-32),32,o,t),S=(e,t,n)=>h(v,o,o,e*o,0,t,n),x=(e,t,n)=>h(v,o,o,e*o,16,t,n);(async()=>{v=await("a.png",new Promise((e=>{const o=new Image;o.onload=()=>e(o),o.src="a.png"}))),E||F||(E=Math.floor(I[0]/2),F=Math.floor(I[1]/2)),onresize=r,r(),requestAnimationFrame(q)})().catch(console.error)})();