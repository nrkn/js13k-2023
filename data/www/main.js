(()=>{"use strict";const e=160,o=16;let t=0,n=e;const r=()=>{t=innerWidth>innerHeight?1:2,n=Math.floor((1===t?innerWidth:innerHeight)/(1===t?innerHeight:innerWidth)*e)},l=()=>1===t?n:e,a=()=>1===t?e:n,d=c.getContext("2d"),h=(e,o,t,n,r,l,a)=>d.drawImage(e,n,r,o,t,l,a,o,t),i=()=>{c.width=l(),c.height=a(),d.fillStyle="#000",d.fillRect(0,0,l(),a())},s=[];onkeydown=e=>{87!==e.keyCode&&38!==e.keyCode||(s[1]=1),83!==e.keyCode&&40!==e.keyCode||(s[2]=1),65!==e.keyCode&&37!==e.keyCode||(s[3]=1),68!==e.keyCode&&39!==e.keyCode||(s[4]=1),32!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode&&69!==e.keyCode||(s[5]=1)},onkeyup=e=>{87!==e.keyCode&&38!==e.keyCode||(s[1]=0),83!==e.keyCode&&40!==e.keyCode||(s[2]=0),65!==e.keyCode&&37!==e.keyCode||(s[3]=0),68!==e.keyCode&&39!==e.keyCode||(s[4]=0),32!==e.keyCode&&13!==e.keyCode&&27!==e.keyCode&&69!==e.keyCode||(s[5]=0)};let y,k,C=0,f=0,M=0,g=0;const m=()=>{(()=>{const e=f-g>125;y=p,k=H,s[1]&&e&&(H--,g=f),s[2]&&e&&(H++,g=f),s[3]&&e&&(p--,g=f),s[4]&&e&&(p++,g=f),W[2][H*W[0]+p][0]<=8&&(p=y,H=k)})(),i(),(()=>{const[e,t,n,r,d,h]=((e,t,n,r)=>{let l=Math.ceil(n/o),a=Math.ceil(r/o);l=l%2?l:l+1,a=a%2?a:a+1;const d=(l-1)/2,h=(a-1)/2;return[l,a,t-h,e-d,Math.floor(n/2-8-d*o),Math.floor(r/2-8-h*o)]})(p,H,l(),a()),[c,i,s]=W;let y=d,k=h;for(let l=n;l<n+t;l++)if(!(l<0||l>=i)){for(let t=r;t<r+e;t++){if(t<0||t>=c)continue;const e=s[l*c+t][0];E(e,y,k),y+=o}y=d,k+=o}})(),(()=>{const e="RANGER";for(let o=0;o<e.length;o++){const t=e.charCodeAt(o);q(t,8*o,0)}})(),F(0+M,Math.floor(l()/2-8),Math.floor(a()/2-8))};let u=1,w=["Lost contact with","RANGER. Take boat","and investigate."];const A=e=>{(e=>{C||(C=e),f=e-C,M=Math.floor(f/500)%2})(e),0===u&&m(),1===u&&(()=>{0===w.length&&(u=0),s[5]&&(u=0),i();const e=Math.floor(a()/8),o=Math.floor(l()/8);let t=8*Math.floor((e-w.length)/2);for(let e=0;e<w.length;e++){const n=w[e];for(let e=0;e<n.length;e++){const r=n.charCodeAt(e),l=8*Math.floor((o-n.length)/2)+8*e;q(r,l,t)}t+=8}})(),requestAnimationFrame(A)};let R,p=0,H=0,W=((e,o)=>{const t=[];for(let e=0;e<160;e++)for(let e=0;e<160;e++){const e=Math.random()<.75,o=e?13:2,n=e?8:4,r=Math.floor(Math.random()*n)+o;t.push([r])}return[160,160,t]})();const q=(e,o,t)=>h(R,8,8,8*(e-32),32,o,t),E=(e,t,n)=>h(R,o,o,e*o,0,t,n),F=(e,t,n)=>h(R,o,o,e*o,16,t,n);(async()=>{R=await("a.png",new Promise((e=>{const o=new Image;o.onload=()=>e(o),o.src="a.png"}))),p||H||(p=Math.floor(W[0]/2),H=Math.floor(W[1]/2)),onresize=r,r(),requestAnimationFrame(A)})().catch(console.error)})();